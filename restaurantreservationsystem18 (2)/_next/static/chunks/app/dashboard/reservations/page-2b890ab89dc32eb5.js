(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{7626:function(e,t,s){Promise.resolve().then(s.bind(s,72447))},72447:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(57437),r=s(2265),n=s(38426),i=s(99376),l=s(76443),o=s(66070),d=s(62869),c=s(35974),u=s(53647),m=s(27e3),h=s(52255);function x(e){let{reservations:t,onReservationUpdate:s}=e,[n,i]=(0,r.useState)("all"),l=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"seated":return"bg-blue-100 text-blue-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no-show":return"bg-orange-100 text-orange-800"}},d=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"failed":return"bg-red-100 text-red-800 border-red-200";case"refunded":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=(e,t)=>{m.Tr.updateReservationStatus(e,t),null==s||s()},h=t.filter(e=>"all"===n||e.status===n),x=h.filter(e=>{let t=new Date().toISOString().split("T")[0];return e.date===t}),p=h.filter(e=>{let t=new Date().toISOString().split("T")[0];return e.date>t});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Reservations"}),(0,a.jsxs)(u.Ph,{value:n,onValueChange:i,children:[(0,a.jsx)(u.i4,{className:"w-40",children:(0,a.jsx)(u.ki,{})}),(0,a.jsxs)(u.Bw,{children:[(0,a.jsx)(u.Ql,{value:"all",children:"All Status"}),(0,a.jsx)(u.Ql,{value:"pending",children:"Pending"}),(0,a.jsx)(u.Ql,{value:"confirmed",children:"Confirmed"}),(0,a.jsx)(u.Ql,{value:"seated",children:"Seated"}),(0,a.jsx)(u.Ql,{value:"completed",children:"Completed"}),(0,a.jsx)(u.Ql,{value:"cancelled",children:"Cancelled"}),(0,a.jsx)(u.Ql,{value:"no-show",children:"No Show"})]})]})]}),x.length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Today's Reservations"})}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,a.jsx)(g,{reservation:e,onStatusChange:c,getStatusColor:l,getPaymentStatusColor:d},e.id))})})]}),p.length>0&&(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-lg",children:"Upcoming Reservations"})}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsx)(g,{reservation:e,onStatusChange:c,getStatusColor:l,getPaymentStatusColor:d},e.id))})})]}),0===h.length&&(0,a.jsx)(o.Zb,{children:(0,a.jsx)(o.aY,{className:"py-8 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No reservations found for the selected filter."})})})]})}function g(e){let{reservation:t,onStatusChange:s,getStatusColor:r,getPaymentStatusColor:n}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:t.customerName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.customerEmail}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.customerPhone})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,a.jsx)(c.C,{className:r(t.status),children:t.status}),t.paymentStatus&&(0,a.jsxs)(c.C,{variant:"outline",className:n(t.paymentStatus),children:["Payment: ",t.paymentStatus]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Date"}),(0,a.jsx)("p",{children:(0,h.WU)(new Date(t.date),"MMM dd, yyyy")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Time"}),(0,a.jsx)("p",{children:t.time})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Party Size"}),(0,a.jsxs)("p",{children:[t.partySize," people"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Table"}),(0,a.jsxs)("p",{children:["Table ",t.tableId.replace(/^t/,"")]})]}),t.paymentAmount&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Amount"}),(0,a.jsxs)("p",{className:"text-green-600 font-semibold",children:["$",t.paymentAmount.toFixed(2)]})]})]}),t.paymentId&&(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Payment Details"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",t.paymentId]})]}),(0,a.jsxs)("div",{className:"text-right",children:[t.paymentAmount&&(0,a.jsxs)("p",{className:"text-sm font-semibold",children:["$",t.paymentAmount.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:t.paymentStatus||"pending"})]})]})}),t.specialRequests&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:"Special Requests"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.specialRequests})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{size:"sm",onClick:()=>s(t.id,"confirmed"),children:"Confirm"}),(0,a.jsx)(d.z,{size:"sm",variant:"destructive",onClick:()=>s(t.id,"cancelled"),children:"Cancel"})]}),"confirmed"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.z,{size:"sm",onClick:()=>s(t.id,"seated"),children:"Seat Customer"}),(0,a.jsx)(d.z,{size:"sm",variant:"outline",onClick:()=>s(t.id,"no-show"),children:"No Show"})]}),"seated"===t.status&&(0,a.jsx)(d.z,{size:"sm",onClick:()=>s(t.id,"completed"),children:"Complete"}),"failed"===t.paymentStatus&&(0,a.jsx)(d.z,{size:"sm",variant:"outline",children:"Retry Payment"}),"completed"===t.paymentStatus&&"cancelled"===t.status&&(0,a.jsx)(d.z,{size:"sm",variant:"outline",children:"Process Refund"})]})]})}function p(){let{user:e,isAuthenticated:t,isLoading:s,logout:o}=(0,n.a)(),c=(0,i.useRouter)(),[u,h]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),f=()=>{if(e&&("manager"===e.role||"admin"===e.role)){let t=m.Tr.getRestaurantByManagerId(e.id);t&&(h(t),p(m.Tr.getReservationsByRestaurant(t.id)))}},v=async()=>{await o(),c.push("/")};return((0,r.useEffect)(()=>{if(!s&&!t){c.push("/login");return}if((null==e?void 0:e.role)==="customer"){c.push("/booking");return}f()},[e,t,s,c]),s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e&&"customer"!==e.role?(0,a.jsxs)("div",{className:"min-h-screen bg-background flex",children:[(0,a.jsx)(l.Y,{className:"w-64 flex-shrink-0"}),(0,a.jsx)("main",{className:"flex-1 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Reservations"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage all restaurant reservations and bookings"})]}),(0,a.jsxs)(d.z,{variant:"outline",onClick:v,size:"lg",className:"hover:bg-card hover:border-primary/50 transition-all duration-300 shadow-lg bg-transparent",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),(0,a.jsx)(x,{reservations:g,onReservationUpdate:f})]})})]}):null}},76443:function(e,t,s){"use strict";s.d(t,{Y:function(){return d}});var a=s(57437),r=s(94508),n=s(62869),i=s(38426),l=s(99376),o=s(27648);function d(e){let{className:t}=e,{user:s,logout:d}=(0,i.a)(),c=(0,l.useRouter)(),u=(0,l.usePathname)(),m=async()=>{await d(),c.push("/")},h=[{name:"Dashboard",href:"/dashboard",icon:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"})]})},{name:"Reservations",href:"/dashboard/reservations",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{name:"Tables",href:"/dashboard/tables",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{name:"Availability",href:"/dashboard/availability",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}];return(null==s?void 0:s.role)==="admin"&&h.push({name:"Analytics",href:"/dashboard/analytics",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col h-full bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700/50 shadow-2xl",t),children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-primary/10 to-transparent",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"TableBook"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:(null==s?void 0:s.role)==="admin"?"Admin Panel":"Manager Dashboard"})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:h.map(e=>(0,a.jsx)(o.default,{href:e.href,children:(0,a.jsxs)(n.z,{variant:u===e.href?"secondary":"ghost",className:(0,r.cn)("w-full justify-start text-slate-300 hover:text-white hover:bg-slate-700/50 transition-all duration-200",u===e.href&&"bg-primary/20 text-primary-foreground border border-primary/30 shadow-lg"),children:[(0,a.jsx)("div",{className:"p-1 rounded-md bg-slate-700/50 mr-3",children:e.icon}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]})},e.name))}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-700/50 bg-gradient-to-r from-slate-800/50 to-transparent",children:[(0,a.jsxs)("div",{className:"mb-4 p-3 bg-slate-800/50 rounded-lg border border-slate-700/30",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:null==s?void 0:s.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:null==s?void 0:s.email}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500 capitalize",children:[null==s?void 0:s.role," Account"]})]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:m,className:"w-full bg-slate-700/30 border-slate-600/50 text-slate-300 hover:bg-slate-600/50 hover:text-white hover:border-slate-500 transition-all duration-200",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})}},53647:function(e,t,s){"use strict";s.d(t,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return h},i4:function(){return u},ki:function(){return c}});var a=s(57437);s(2265);var r=s(5056),n=s(40875),i=s(30401),l=s(22135),o=s(94508);function d(e){let{...t}=e;return(0,a.jsx)(r.fC,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,a.jsx)(r.B4,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:s="default",children:i,...l}=e;return(0,a.jsxs)(r.xz,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:s,position:n="popper",...i}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(x,{}),(0,a.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(g,{})]})})}function h(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(r.ck,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(i.Z,{className:"size-4"})})}),(0,a.jsx)(r.eT,{children:s})]})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(r.u_,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.Z,{className:"size-4"})})}function g(e){let{className:t,...s}=e;return(0,a.jsx)(r.$G,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.Z,{className:"size-4"})})}},38426:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return o},a:function(){return d}});var a=s(57437),r=s(2265);let n=[{id:"1",email:"admin@restaurant.com",name:"Admin User",role:"admin",createdAt:new Date},{id:"2",email:"manager@restaurant.com",name:"Restaurant Manager",role:"manager",restaurantId:"rest-1",createdAt:new Date},{id:"3",email:"customer@example.com",name:"John Doe",role:"customer",createdAt:new Date}];class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}async login(e,t){await new Promise(e=>setTimeout(e,1e3));let s=n.find(t=>t.email===e);if(!s)throw Error("Invalid credentials");return this.currentUser=s,localStorage.setItem("auth_user",JSON.stringify(s)),s}async register(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"customer";if(await new Promise(e=>setTimeout(e,1e3)),n.find(t=>t.email===e))throw Error("User already exists");let r={id:Date.now().toString(),email:e,name:s,role:a,createdAt:new Date};return n.push(r),r}async logout(){this.currentUser=null,localStorage.removeItem("auth_user")}getCurrentUser(){if(this.currentUser)return this.currentUser;let e=localStorage.getItem("auth_user");return e&&(this.currentUser=JSON.parse(e)),this.currentUser}isAuthenticated(){return null!==this.getCurrentUser()}hasRole(e){let t=this.getCurrentUser();return(null==t?void 0:t.role)===e}constructor(){this.currentUser=null}}let l=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,n]=(0,r.useState)({user:null,isLoading:!0,isAuthenticated:!1}),o=i.getInstance();(0,r.useEffect)(()=>{let e=o.getCurrentUser();n({user:e,isLoading:!1,isAuthenticated:!!e})},[]);let d=async(e,t)=>{n(e=>({...e,isLoading:!0}));try{let s=await o.login(e,t);n({user:s,isLoading:!1,isAuthenticated:!0})}catch(e){throw n(e=>({...e,isLoading:!1})),e}},c=async(e,t,s)=>{n(e=>({...e,isLoading:!0}));try{await o.register(e,t,s),n(e=>({...e,isLoading:!1}))}catch(e){throw n(e=>({...e,isLoading:!1})),e}},u=async()=>{await o.logout(),n({user:null,isLoading:!1,isAuthenticated:!1})};return(0,a.jsx)(l.Provider,{value:{...s,login:d,register:c,logout:u},children:t})}function d(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[569,448,424,255,150,971,117,744],function(){return e(e.s=7626)}),_N_E=e.O()}]);