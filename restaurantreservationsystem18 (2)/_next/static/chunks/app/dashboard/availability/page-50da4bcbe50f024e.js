(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{14827:function(e,t,a){Promise.resolve().then(a.bind(a,26294))},26294:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var s=a(57437),r=a(2265),i=a(38426),n=a(99376),l=a(76443),d=a(66070),o=a(35974),c=a(53647),u=a(27e3);let m=[],h=[{id:"block-1",restaurantId:"rest-1",date:"2024-01-15",startTime:"15:00",endTime:"17:00",reason:"Private event setup",tableIds:["t6"],createdBy:"2",createdAt:new Date}];class x{static generateTimeSlots(){let e=[];for(let t=this.OPENING_HOUR;t<this.CLOSING_HOUR;t++)for(let a=0;a<60;a+=this.SLOT_DURATION){let s="".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"));e.push(s)}return e}static async getAvailabilityCalendar(e,t){let a=u.bd.find(t=>t.id===e);if(!a)throw Error("Restaurant not found");let s=this.generateTimeSlots(),r=[];for(let a of s){let s=await this.checkSlotAvailability(e,t,a);r.push(s)}let i=a.tables.reduce((e,t)=>e+t.capacity,0),n=r.reduce((e,t)=>e+(t.capacity-(t.available?t.capacity:0)),0);return{date:t,slots:r,totalCapacity:i,bookedCapacity:n,availableCapacity:i-n}}static async checkSlotAvailability(e,t,a){let s=u.bd.find(t=>t.id===e);if(!s)throw Error("Restaurant not found");if(this.isTimeSlotBlocked(e,t,a))return{time:a,available:!1,tableIds:[],capacity:0,waitlistCount:this.getWaitlistCount(e,t,a)};let r=s.tables.filter(s=>"maintenance"!==s.status&&!this.isTableBooked(e,s.id,t,a)),i=r.reduce((e,t)=>e+t.capacity,0);return{time:a,available:r.length>0,tableIds:r.map(e=>e.id),capacity:i,waitlistCount:this.getWaitlistCount(e,t,a)}}static isTableBooked(e,t,a,s){return u._$.some(r=>{if(r.restaurantId!==e||r.tableId!==t||r.date!==a||"cancelled"===r.status)return!1;let i=this.timeToMinutes(r.time),n=i+r.duration,l=this.timeToMinutes(s),d=l+this.DINING_DURATION;return l>=i&&l<n||d>i&&d<=n||l<=i&&d>=n})}static isTimeSlotBlocked(e,t,a){return h.some(s=>{if(s.restaurantId!==e||s.date!==t)return!1;let r=this.timeToMinutes(s.startTime),i=this.timeToMinutes(s.endTime),n=this.timeToMinutes(a);return n>=r&&n<i})}static getWaitlistCount(e,t,a){return m.filter(s=>s.restaurantId===e&&s.date===t&&s.time===a).length}static async addToWaitlist(e){let t={...e,id:"wait-".concat(Date.now()),priority:m.length+1,createdAt:new Date,notified:!1};return m.push(t),t.id}static async blockTimeSlot(e){let t={...e,id:"block-".concat(Date.now()),createdAt:new Date};return h.push(t),t.id}static async removeBlockedSlot(e){let t=h.findIndex(t=>t.id===e);t>-1&&h.splice(t,1)}static getBlockedSlots(e,t){return h.filter(a=>a.restaurantId===e&&(!t||a.date===t))}static getWaitlistEntries(e){return m.filter(t=>t.restaurantId===e).sort((e,t)=>e.priority-t.priority)}static async notifyWaitlistCustomer(e){let t=m.find(t=>t.id===e);t&&(t.notified=!0,console.log("Notified ".concat(t.customerName," about table availability")))}static findBestTable(e,t,a,s){let r=u.bd.find(t=>t.id===e);if(!r)return null;let i=r.tables.filter(r=>!(r.capacity<s)&&"maintenance"!==r.status&&!this.isTableBooked(e,r.id,t,a));return 0===i.length?null:(i.sort((e,t)=>e.capacity-t.capacity),i[0].id)}static timeToMinutes(e){let[t,a]=e.split(":").map(Number);return 60*t+a}}x.SLOT_DURATION=30,x.DINING_DURATION=120,x.OPENING_HOUR=11,x.CLOSING_HOUR=23;var f=a(52255),v=a(48700);function p(e){let{restaurantId:t}=e,[a,i]=(0,r.useState)((0,f.WU)(new Date,"yyyy-MM-dd")),[n,l]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),h=Array.from({length:14},(e,t)=>{let a=(0,v.E)(new Date,t);return{value:(0,f.WU)(a,"yyyy-MM-dd"),label:(0,f.WU)(a,"EEE, MMM dd")}});(0,r.useEffect)(()=>{p()},[a,t]);let p=async()=>{m(!0);try{let e=await x.getAvailabilityCalendar(t,a);l(e)}catch(e){console.error("Failed to load availability:",e)}finally{m(!1)}},g=e=>e.available?e.capacity<=4?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800":"bg-red-100 text-red-800",j=e=>e.available?"".concat(e.capacity," seats"):e.waitlistCount>0?"Waitlist (".concat(e.waitlistCount,")"):"Unavailable";return u?(0,s.jsx)(d.Zb,{children:(0,s.jsxs)(d.aY,{className:"py-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading availability..."})]})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsx)(d.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(d.ll,{children:"Real-time Availability"}),(0,s.jsxs)(c.Ph,{value:a,onValueChange:i,children:[(0,s.jsx)(c.i4,{className:"w-48",children:(0,s.jsx)(c.ki,{})}),(0,s.jsx)(c.Bw,{children:h.map(e=>(0,s.jsx)(c.Ql,{value:e.value,children:e.label},e.value))})]})]})}),(0,s.jsx)(d.aY,{children:n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted rounded-lg",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:n.totalCapacity}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Capacity"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600",children:n.availableCapacity}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Available"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600",children:n.bookedCapacity}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Booked"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:n.slots.map(e=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-sm font-medium mb-1",children:e.time}),(0,s.jsx)(o.C,{className:g(e),variant:"outline",children:j(e)})]},e.time))}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-100 border border-green-200 rounded"}),(0,s.jsx)("span",{children:"High Availability (5+ seats)"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-yellow-100 border border-yellow-200 rounded"}),(0,s.jsx)("span",{children:"Limited Availability (1-4 seats)"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-red-100 border border-red-200 rounded"}),(0,s.jsx)("span",{children:"Unavailable / Waitlist"})]})]})]})})]})})}var g=a(62869);function j(e){let{restaurantId:t}=e,[a,i]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o()},[t]);let o=async()=>{l(!0);try{let e=x.getWaitlistEntries(t);i(e)}catch(e){console.error("Failed to load waitlist:",e)}finally{l(!1)}},c=async e=>{try{await x.notifyWaitlistCustomer(e),o()}catch(e){console.error("Failed to notify customer:",e)}},u=a.filter(e=>{let t=new Date().toISOString().split("T")[0];return e.date===t}),m=a.filter(e=>{let t=new Date().toISOString().split("T")[0];return e.date>t});return n?(0,s.jsx)(d.Zb,{children:(0,s.jsxs)(d.aY,{className:"py-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading waitlist..."})]})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsx)(d.Ol,{children:(0,s.jsx)(d.ll,{children:"Waitlist Management"})}),(0,s.jsx)(d.aY,{children:0===a.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No customers on waitlist"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[u.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-4",children:"Today's Waitlist"}),(0,s.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,s.jsx)(b,{entry:e,onNotify:c},e.id))})]}),m.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-4",children:"Upcoming Waitlist"}),(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,s.jsx)(b,{entry:e,onNotify:c},e.id))})]})]})})]})})}function b(e){let{entry:t,onNotify:a}=e;return(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold",children:t.customerName}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:t.customerEmail}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:t.customerPhone})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)(o.C,{variant:"outline",children:["Priority #",t.priority]}),t.notified&&(0,s.jsx)(o.C,{className:"ml-2 bg-blue-100 text-blue-800",children:"Notified"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Date"}),(0,s.jsx)("p",{children:(0,f.WU)(new Date(t.date),"MMM dd, yyyy")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Time"}),(0,s.jsx)("p",{children:t.time})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:"Party Size"}),(0,s.jsxs)("p",{children:[t.partySize," people"]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[!t.notified&&(0,s.jsx)(g.z,{size:"sm",onClick:()=>a(t.id),children:"Notify Customer"}),(0,s.jsx)(g.z,{size:"sm",variant:"outline",children:"Contact Customer"})]})]})}var y=a(26815),N=a(94508);function w(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,N.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var k=a(65613);function T(e){let{restaurantId:t,userId:a}=e,[i,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[j,b]=(0,r.useState)({date:"",startTime:"",endTime:"",reason:""}),N=Array.from({length:30},(e,t)=>{let a=(0,v.E)(new Date,t);return{value:(0,f.WU)(a,"yyyy-MM-dd"),label:(0,f.WU)(a,"EEE, MMM dd")}}),T=[];for(let e=11;e<23;e++)for(let t=0;t<60;t+=30){let a="".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"));T.push(a)}(0,r.useEffect)(()=>{C()},[t]);let C=async()=>{o(!0);try{let e=x.getBlockedSlots(t);n(e)}catch(e){console.error("Failed to load blocked slots:",e)}finally{o(!1)}},S=async e=>{if(e.preventDefault(),p(""),j.startTime>=j.endTime){p("End time must be after start time");return}try{await x.blockTimeSlot({restaurantId:t,date:j.date,startTime:j.startTime,endTime:j.endTime,reason:j.reason,createdBy:a}),b({date:"",startTime:"",endTime:"",reason:""}),m(!1),C()}catch(e){p(e instanceof Error?e.message:"Failed to block time slot")}},M=async e=>{try{await x.removeBlockedSlot(e),C()}catch(e){console.error("Failed to remove blocked slot:",e)}};return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsx)(d.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(d.ll,{children:"Time Blocking"}),(0,s.jsx)(g.z,{onClick:()=>m(!u),children:u?"Cancel":"Block Time Slot"})]})}),(0,s.jsxs)(d.aY,{children:[u&&(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4 mb-6 p-4 border rounded-lg",children:[h&&(0,s.jsx)(k.bZ,{variant:"destructive",children:(0,s.jsx)(k.X,{children:h})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y._,{htmlFor:"date",children:"Date"}),(0,s.jsxs)(c.Ph,{value:j.date,onValueChange:e=>b(t=>({...t,date:e})),children:[(0,s.jsx)(c.i4,{children:(0,s.jsx)(c.ki,{placeholder:"Select date"})}),(0,s.jsx)(c.Bw,{children:N.map(e=>(0,s.jsx)(c.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y._,{htmlFor:"startTime",children:"Start Time"}),(0,s.jsxs)(c.Ph,{value:j.startTime,onValueChange:e=>b(t=>({...t,startTime:e})),children:[(0,s.jsx)(c.i4,{children:(0,s.jsx)(c.ki,{placeholder:"Start time"})}),(0,s.jsx)(c.Bw,{children:T.map(e=>(0,s.jsx)(c.Ql,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y._,{htmlFor:"endTime",children:"End Time"}),(0,s.jsxs)(c.Ph,{value:j.endTime,onValueChange:e=>b(t=>({...t,endTime:e})),children:[(0,s.jsx)(c.i4,{children:(0,s.jsx)(c.ki,{placeholder:"End time"})}),(0,s.jsx)(c.Bw,{children:T.map(e=>(0,s.jsx)(c.Ql,{value:e,children:e},e))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y._,{htmlFor:"reason",children:"Reason"}),(0,s.jsx)(w,{id:"reason",value:j.reason,onChange:e=>b(t=>({...t,reason:e.target.value})),placeholder:"Reason for blocking this time slot...",required:!0})]}),(0,s.jsx)(g.z,{type:"submit",disabled:!j.date||!j.startTime||!j.endTime||!j.reason,children:"Block Time Slot"})]}),l?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Loading blocked slots..."})]}):0===i.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No blocked time slots"})}):(0,s.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold",children:[(0,f.WU)(new Date(e.date),"MMM dd, yyyy")," â€¢ ",e.startTime," - ",e.endTime]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.reason}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Created ",(0,f.WU)(e.createdAt,"MMM dd, yyyy 'at' HH:mm")]})]}),(0,s.jsx)(g.z,{size:"sm",variant:"destructive",onClick:()=>M(e.id),children:"Remove"})]})},e.id))})]})]})})}var C=a(20271);function S(e){let{className:t,...a}=e;return(0,s.jsx)(C.fC,{"data-slot":"tabs",className:(0,N.cn)("flex flex-col gap-2",t),...a})}function M(e){let{className:t,...a}=e;return(0,s.jsx)(C.aV,{"data-slot":"tabs-list",className:(0,N.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function z(e){let{className:t,...a}=e;return(0,s.jsx)(C.xz,{"data-slot":"tabs-trigger",className:(0,N.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function _(e){let{className:t,...a}=e;return(0,s.jsx)(C.VY,{"data-slot":"tabs-content",className:(0,N.cn)("flex-1 outline-none",t),...a})}function A(){let{user:e,isAuthenticated:t,isLoading:a,logout:d}=(0,i.a)(),o=(0,n.useRouter)(),[c,m]=(0,r.useState)(null),h=async()=>{await d(),o.push("/")};return((0,r.useEffect)(()=>{if(!a&&!t){o.push("/login");return}if((null==e?void 0:e.role)==="customer"){o.push("/booking");return}if(e&&("manager"===e.role||"admin"===e.role)){let t=u.Tr.getRestaurantByManagerId(e.id);t&&m(t)}},[e,t,a,o]),a)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e&&"customer"!==e.role&&c?(0,s.jsxs)("div",{className:"min-h-screen bg-background flex",children:[(0,s.jsx)(l.Y,{className:"w-64 flex-shrink-0"}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Availability Management"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Monitor real-time availability, manage waitlists, and block time slots"})]}),(0,s.jsxs)(g.z,{variant:"outline",onClick:h,size:"lg",className:"hover:bg-card hover:border-primary/50 transition-all duration-300 shadow-lg bg-transparent",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),(0,s.jsxs)(S,{defaultValue:"calendar",className:"space-y-6",children:[(0,s.jsxs)(M,{children:[(0,s.jsx)(z,{value:"calendar",children:"Availability Calendar"}),(0,s.jsx)(z,{value:"waitlist",children:"Waitlist"}),(0,s.jsx)(z,{value:"blocking",children:"Time Blocking"})]}),(0,s.jsx)(_,{value:"calendar",children:(0,s.jsx)(p,{restaurantId:c.id})}),(0,s.jsx)(_,{value:"waitlist",children:(0,s.jsx)(j,{restaurantId:c.id})}),(0,s.jsx)(_,{value:"blocking",children:(0,s.jsx)(T,{restaurantId:c.id,userId:e.id})})]})]})})]}):null}},76443:function(e,t,a){"use strict";a.d(t,{Y:function(){return o}});var s=a(57437),r=a(94508),i=a(62869),n=a(38426),l=a(99376),d=a(27648);function o(e){let{className:t}=e,{user:a,logout:o}=(0,n.a)(),c=(0,l.useRouter)(),u=(0,l.usePathname)(),m=async()=>{await o(),c.push("/")},h=[{name:"Dashboard",href:"/dashboard",icon:(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"})]})},{name:"Reservations",href:"/dashboard/reservations",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{name:"Tables",href:"/dashboard/tables",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{name:"Availability",href:"/dashboard/availability",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}];return(null==a?void 0:a.role)==="admin"&&h.push({name:"Analytics",href:"/dashboard/analytics",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col h-full bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700/50 shadow-2xl",t),children:[(0,s.jsxs)("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-primary/10 to-transparent",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"TableBook"}),(0,s.jsx)("p",{className:"text-sm text-slate-300",children:(null==a?void 0:a.role)==="admin"?"Admin Panel":"Manager Dashboard"})]}),(0,s.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:h.map(e=>(0,s.jsx)(d.default,{href:e.href,children:(0,s.jsxs)(i.z,{variant:u===e.href?"secondary":"ghost",className:(0,r.cn)("w-full justify-start text-slate-300 hover:text-white hover:bg-slate-700/50 transition-all duration-200",u===e.href&&"bg-primary/20 text-primary-foreground border border-primary/30 shadow-lg"),children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-slate-700/50 mr-3",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.name))}),(0,s.jsxs)("div",{className:"p-4 border-t border-slate-700/50 bg-gradient-to-r from-slate-800/50 to-transparent",children:[(0,s.jsxs)("div",{className:"mb-4 p-3 bg-slate-800/50 rounded-lg border border-slate-700/30",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white",children:null==a?void 0:a.name}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:null==a?void 0:a.email}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-slate-500 capitalize",children:[null==a?void 0:a.role," Account"]})]}),(0,s.jsxs)(i.z,{variant:"outline",onClick:m,className:"w-full bg-slate-700/30 border-slate-600/50 text-slate-300 hover:bg-slate-600/50 hover:text-white hover:border-slate-500 transition-all duration-200",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})}},65613:function(e,t,a){"use strict";a.d(t,{X:function(){return d},bZ:function(){return l}});var s=a(57437);a(2265);var r=a(90535),i=a(94508);let n=(0,r.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,i.cn)(n({variant:a}),t),...r})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return n}});var s=a(57437);a(2265);var r=a(6394),i=a(94508);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.f,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},53647:function(e,t,a){"use strict";a.d(t,{Bw:function(){return m},Ph:function(){return o},Ql:function(){return h},i4:function(){return u},ki:function(){return c}});var s=a(57437);a(2265);var r=a(5056),i=a(40875),n=a(30401),l=a(22135),d=a(94508);function o(e){let{...t}=e;return(0,s.jsx)(r.fC,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,s.jsx)(r.B4,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:n,...l}=e;return(0,s.jsxs)(r.xz,{"data-slot":"select-trigger","data-size":a,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[n,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:i="popper",...n}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(f,{})]})})}function h(e){let{className:t,children:a,...i}=e;return(0,s.jsxs)(r.ck,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(n.Z,{className:"size-4"})})}),(0,s.jsx)(r.eT,{children:a})]})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(r.u_,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.Z,{className:"size-4"})})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(r.$G,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.Z,{className:"size-4"})})}},38426:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return d},a:function(){return o}});var s=a(57437),r=a(2265);let i=[{id:"1",email:"admin@restaurant.com",name:"Admin User",role:"admin",createdAt:new Date},{id:"2",email:"manager@restaurant.com",name:"Restaurant Manager",role:"manager",restaurantId:"rest-1",createdAt:new Date},{id:"3",email:"customer@example.com",name:"John Doe",role:"customer",createdAt:new Date}];class n{static getInstance(){return n.instance||(n.instance=new n),n.instance}async login(e,t){await new Promise(e=>setTimeout(e,1e3));let a=i.find(t=>t.email===e);if(!a)throw Error("Invalid credentials");return this.currentUser=a,localStorage.setItem("auth_user",JSON.stringify(a)),a}async register(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"customer";if(await new Promise(e=>setTimeout(e,1e3)),i.find(t=>t.email===e))throw Error("User already exists");let r={id:Date.now().toString(),email:e,name:a,role:s,createdAt:new Date};return i.push(r),r}async logout(){this.currentUser=null,localStorage.removeItem("auth_user")}getCurrentUser(){if(this.currentUser)return this.currentUser;let e=localStorage.getItem("auth_user");return e&&(this.currentUser=JSON.parse(e)),this.currentUser}isAuthenticated(){return null!==this.getCurrentUser()}hasRole(e){let t=this.getCurrentUser();return(null==t?void 0:t.role)===e}constructor(){this.currentUser=null}}let l=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[a,i]=(0,r.useState)({user:null,isLoading:!0,isAuthenticated:!1}),d=n.getInstance();(0,r.useEffect)(()=>{let e=d.getCurrentUser();i({user:e,isLoading:!1,isAuthenticated:!!e})},[]);let o=async(e,t)=>{i(e=>({...e,isLoading:!0}));try{let a=await d.login(e,t);i({user:a,isLoading:!1,isAuthenticated:!0})}catch(e){throw i(e=>({...e,isLoading:!1})),e}},c=async(e,t,a)=>{i(e=>({...e,isLoading:!0}));try{await d.register(e,t,a),i(e=>({...e,isLoading:!1}))}catch(e){throw i(e=>({...e,isLoading:!1})),e}},u=async()=>{await d.logout(),i({user:null,isLoading:!1,isAuthenticated:!1})};return(0,s.jsx)(l.Provider,{value:{...a,login:o,register:c,logout:u},children:t})}function o(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[569,448,424,255,860,150,971,117,744],function(){return e(e.s=14827)}),_N_E=e.O()}]);