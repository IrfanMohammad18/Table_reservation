(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{87901:function(e,t,s){Promise.resolve().then(s.bind(s,71154))},71154:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(57437),r=s(2265),n=s(38426),l=s(99376),i=s(76443),d=s(66070),c=s(62869),o=s(35974),u=s(65613),m=s(27e3),x=s(52255);function h(e){let{restaurant:t,onTableUpdate:s}=e,[n,l]=(0,r.useState)(null),[i,h]=(0,r.useState)([]);(0,r.useState)(()=>{h(m.Tr.getReservationsByRestaurant(t.id))});let g=e=>{switch(e){case"available":return"bg-green-500 hover:bg-green-600";case"occupied":return"bg-red-500 hover:bg-red-600";case"reserved":return"bg-yellow-500 hover:bg-yellow-600";case"maintenance":return"bg-gray-500 hover:bg-gray-600";default:return"bg-gray-300 hover:bg-gray-400"}},v=e=>{switch(e){case"available":return"Available";case"occupied":return"Occupied";case"reserved":return"Reserved";case"maintenance":return"Maintenance";default:return"Unknown"}},f=e=>{switch(e){case"indoor":return"\uD83C\uDFE0";case"outdoor":return"\uD83C\uDF33";case"private":return"\uD83D\uDD12";default:return"\uD83D\uDCCD"}},j=e=>{let t=new Date().toISOString().split("T")[0];return i.find(s=>s.tableId===e&&s.date===t&&("confirmed"===s.status||"seated"===s.status))||null},p=e=>{let t=new Date().toISOString().split("T")[0];return i.filter(s=>s.tableId===e&&s.date>=t&&"cancelled"!==s.status&&"completed"!==s.status)},b=(e,a)=>{m.Tr.updateTableStatus(t.id,e,a),null==s||s()},N=e=>{l(e)},w=n?j(n.id):null,y=n?p(n.id):[];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Restaurant Floor Plan"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[t.tables.length," tables total"]})]})}),(0,a.jsxs)(d.aY,{children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-slate-50 to-slate-100 border-2 border-dashed border-slate-200 rounded-lg p-8 min-h-[500px]",children:[(0,a.jsx)("div",{className:"absolute top-2 left-2 text-xs text-muted-foreground",children:"Restaurant Floor Plan"}),t.tables.map(e=>{j(e.id);let t=p(e.id).length>0;return(0,a.jsx)("div",{className:"absolute w-20 h-20 rounded-xl border-3 border-white shadow-lg cursor-pointer transition-all duration-200 hover:scale-110 hover:shadow-xl ".concat(g(e.status)," ").concat((null==n?void 0:n.id)===e.id?"ring-4 ring-primary ring-offset-2 scale-110":""),style:{left:"".concat(Math.min(e.x,85),"%"),top:"".concat(Math.min(e.y,75),"%")},onClick:()=>N(e),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-white text-xs font-bold relative",children:[(0,a.jsx)("div",{className:"absolute -top-1 -right-1 text-xs",children:f(e.location)}),(0,a.jsxs)("span",{className:"text-sm",children:["T",e.number]}),(0,a.jsxs)("span",{className:"text-xs",children:[e.capacity,"p"]}),t&&(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-blue-400 rounded-full border border-white"})]})},e.id)}),(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-center space-x-4 text-xs bg-white/80 backdrop-blur-sm rounded-lg p-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{children:"Available"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,a.jsx)("span",{children:"Occupied"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),(0,a.jsx)("span",{children:"Reserved"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded"}),(0,a.jsx)("span",{children:"Maintenance"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(d.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.tables.filter(e=>"available"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Available"})]})}),(0,a.jsx)(d.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.tables.filter(e=>"occupied"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Occupied"})]})}),(0,a.jsx)(d.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.tables.filter(e=>"reserved"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reserved"})]})}),(0,a.jsx)(d.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:t.tables.filter(e=>"maintenance"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Maintenance"})]})})]})]})]}),n&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{children:["Table ",n.number," Details"]}),(0,a.jsx)("span",{className:"text-lg",children:f(n.location)})]})}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Capacity"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[n.capacity," people"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),(0,a.jsx)(o.C,{variant:"outline",className:"capitalize",children:n.location})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Status"}),(0,a.jsx)(o.C,{className:"".concat(g(n.status)," text-white"),children:v(n.status)})]}),w&&(0,a.jsx)(u.bZ,{children:(0,a.jsx)(u.X,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Current Reservation:"}),(0,a.jsxs)("p",{children:[w.customerName," - ",w.time]}),(0,a.jsxs)("p",{className:"text-sm",children:["Party of ",w.partySize]}),w.paymentAmount&&(0,a.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:["Paid: $",w.paymentAmount.toFixed(2)]})]})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Change Status"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["available","occupied","reserved","maintenance"].map(e=>(0,a.jsx)(c.z,{size:"sm",variant:n.status===e?"default":"outline",onClick:()=>b(n.id,e),children:v(e)},e))})]})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{children:["Reservations for Table ",n.number]})}),(0,a.jsx)(d.aY,{children:y.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[y.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.customerName}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,x.WU)(new Date(e.date),"MMM dd")," at ",e.time]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Party of ",e.partySize]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(o.C,{variant:"outline",className:"mb-1",children:e.status}),e.paymentAmount&&(0,a.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:["$",e.paymentAmount.toFixed(2)]})]})]}),e.specialRequests&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Note: ",e.specialRequests]})]},e.id)),y.length>5&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-center",children:["+",y.length-5," more reservations"]})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No upcoming reservations for this table"})})})]})]})]})}function g(){let{user:e,isAuthenticated:t,isLoading:s,logout:d}=(0,n.a)(),o=(0,l.useRouter)(),[u,x]=(0,r.useState)(null),g=()=>{if(e&&("manager"===e.role||"admin"===e.role)){let t=m.Tr.getRestaurantByManagerId(e.id);t&&x(t)}},v=async()=>{await d(),o.push("/")};return((0,r.useEffect)(()=>{if(!s&&!t){o.push("/login");return}if((null==e?void 0:e.role)==="customer"){o.push("/booking");return}g()},[e,t,s,o]),s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e&&"customer"!==e.role&&u?(0,a.jsxs)("div",{className:"min-h-screen bg-background flex",children:[(0,a.jsx)(i.Y,{className:"w-64 flex-shrink-0"}),(0,a.jsx)("main",{className:"flex-1 p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Table Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Configure table layout and manage availability"})]}),(0,a.jsxs)(c.z,{variant:"outline",onClick:v,size:"lg",className:"hover:bg-card hover:border-primary/50 transition-all duration-300 shadow-lg bg-transparent",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]}),(0,a.jsx)(h,{restaurant:u,onTableUpdate:g})]})})]}):null}},76443:function(e,t,s){"use strict";s.d(t,{Y:function(){return c}});var a=s(57437),r=s(94508),n=s(62869),l=s(38426),i=s(99376),d=s(27648);function c(e){let{className:t}=e,{user:s,logout:c}=(0,l.a)(),o=(0,i.useRouter)(),u=(0,i.usePathname)(),m=async()=>{await c(),o.push("/")},x=[{name:"Dashboard",href:"/dashboard",icon:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h2a2 2 0 012 2v6H8V5z"})]})},{name:"Reservations",href:"/dashboard/reservations",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{name:"Tables",href:"/dashboard/tables",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{name:"Availability",href:"/dashboard/availability",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}];return(null==s?void 0:s.role)==="admin"&&x.push({name:"Analytics",href:"/dashboard/analytics",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col h-full bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700/50 shadow-2xl",t),children:[(0,a.jsxs)("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-primary/10 to-transparent",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"TableBook"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:(null==s?void 0:s.role)==="admin"?"Admin Panel":"Manager Dashboard"})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:x.map(e=>(0,a.jsx)(d.default,{href:e.href,children:(0,a.jsxs)(n.z,{variant:u===e.href?"secondary":"ghost",className:(0,r.cn)("w-full justify-start text-slate-300 hover:text-white hover:bg-slate-700/50 transition-all duration-200",u===e.href&&"bg-primary/20 text-primary-foreground border border-primary/30 shadow-lg"),children:[(0,a.jsx)("div",{className:"p-1 rounded-md bg-slate-700/50 mr-3",children:e.icon}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]})},e.name))}),(0,a.jsxs)("div",{className:"p-4 border-t border-slate-700/50 bg-gradient-to-r from-slate-800/50 to-transparent",children:[(0,a.jsxs)("div",{className:"mb-4 p-3 bg-slate-800/50 rounded-lg border border-slate-700/30",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:null==s?void 0:s.name}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:null==s?void 0:s.email}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500 capitalize",children:[null==s?void 0:s.role," Account"]})]}),(0,a.jsxs)(n.z,{variant:"outline",onClick:m,className:"w-full bg-slate-700/30 border-slate-600/50 text-slate-300 hover:bg-slate-600/50 hover:text-white hover:border-slate-500 transition-all duration-200",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})]})]})}},65613:function(e,t,s){"use strict";s.d(t,{X:function(){return d},bZ:function(){return i}});var a=s(57437);s(2265);var r=s(90535),n=s(94508);let l=(0,r.j)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(l({variant:s}),t),...r})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}},38426:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return d},a:function(){return c}});var a=s(57437),r=s(2265);let n=[{id:"1",email:"admin@restaurant.com",name:"Admin User",role:"admin",createdAt:new Date},{id:"2",email:"manager@restaurant.com",name:"Restaurant Manager",role:"manager",restaurantId:"rest-1",createdAt:new Date},{id:"3",email:"customer@example.com",name:"John Doe",role:"customer",createdAt:new Date}];class l{static getInstance(){return l.instance||(l.instance=new l),l.instance}async login(e,t){await new Promise(e=>setTimeout(e,1e3));let s=n.find(t=>t.email===e);if(!s)throw Error("Invalid credentials");return this.currentUser=s,localStorage.setItem("auth_user",JSON.stringify(s)),s}async register(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"customer";if(await new Promise(e=>setTimeout(e,1e3)),n.find(t=>t.email===e))throw Error("User already exists");let r={id:Date.now().toString(),email:e,name:s,role:a,createdAt:new Date};return n.push(r),r}async logout(){this.currentUser=null,localStorage.removeItem("auth_user")}getCurrentUser(){if(this.currentUser)return this.currentUser;let e=localStorage.getItem("auth_user");return e&&(this.currentUser=JSON.parse(e)),this.currentUser}isAuthenticated(){return null!==this.getCurrentUser()}hasRole(e){let t=this.getCurrentUser();return(null==t?void 0:t.role)===e}constructor(){this.currentUser=null}}let i=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[s,n]=(0,r.useState)({user:null,isLoading:!0,isAuthenticated:!1}),d=l.getInstance();(0,r.useEffect)(()=>{let e=d.getCurrentUser();n({user:e,isLoading:!1,isAuthenticated:!!e})},[]);let c=async(e,t)=>{n(e=>({...e,isLoading:!0}));try{let s=await d.login(e,t);n({user:s,isLoading:!1,isAuthenticated:!0})}catch(e){throw n(e=>({...e,isLoading:!1})),e}},o=async(e,t,s)=>{n(e=>({...e,isLoading:!0}));try{await d.register(e,t,s),n(e=>({...e,isLoading:!1}))}catch(e){throw n(e=>({...e,isLoading:!1})),e}},u=async()=>{await d.logout(),n({user:null,isLoading:!1,isAuthenticated:!1})};return(0,a.jsx)(i.Provider,{value:{...s,login:c,register:o,logout:u},children:t})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[569,448,255,150,971,117,744],function(){return e(e.s=87901)}),_N_E=e.O()}]);